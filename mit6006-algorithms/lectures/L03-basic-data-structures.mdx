---
title: "L03 - åŸºç¡€æ•°æ®ç»“æ„"
description: "æ·±å…¥ç†è§£æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ç­‰åŸºç¡€æ•°æ®ç»“æ„çš„å®ç°å’Œä¼˜åŒ–"
---

import { useState, useEffect } from 'react';
import { CodeBlock } from '@/src/components/algorithm';
import { AlgorithmVisualizer } from '@/src/components/algorithm';
import { ArrayVisualizer } from '@/src/components/algorithm';
import { ComplexityAnalyzer } from '@/src/components/algorithm';
import { ExerciseBlock } from '@/src/components/algorithm';

# L03 - åŸºç¡€æ•°æ®ç»“æ„

## ğŸ“š å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬è®²ä¹‰åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- ğŸ—ï¸ **æŒæ¡æ ¸å¿ƒæ•°æ®ç»“æ„**ï¼šæ·±å…¥ç†è§£æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—çš„å†…éƒ¨å®ç°
- âš¡ **åˆ†ææ€§èƒ½ç‰¹å¾**ï¼šè¯„ä¼°ä¸åŒæ•°æ®ç»“æ„çš„æ—¶ç©ºå¤æ‚åº¦
- ğŸ¯ **é€‰æ‹©åˆé€‚ç»“æ„**ï¼šæ ¹æ®åº”ç”¨åœºæ™¯é€‰æ‹©æœ€ä¼˜æ•°æ®ç»“æ„
- ğŸ› ï¸ **å®ç°ä¼˜åŒ–ç­–ç•¥**ï¼šåº”ç”¨å†…å­˜ç®¡ç†å’Œç¼“å­˜ä¼˜åŒ–æŠ€æœ¯

## ğŸ¯ æ•°æ®ç»“æ„åŸºç¡€

### æ•°æ®ç»“æ„çš„åˆ†ç±»

| ç±»å‹ | æ•°æ®ç»“æ„ | è®¿é—®æ—¶é—´ | æ’å…¥æ—¶é—´ | åˆ é™¤æ—¶é—´ | ä¸»è¦ç‰¹ç‚¹ |
|------|----------|----------|----------|----------|----------|
| **çº¿æ€§** | æ•°ç»„ | O(1) | O(n) | O(n) | è¿ç»­å†…å­˜ï¼Œéšæœºè®¿é—® |
|  | é“¾è¡¨ | O(n) | O(1) | O(1) | åŠ¨æ€å¤§å°ï¼Œé¡ºåºè®¿é—® |
|  | æ ˆ | O(1) | O(1) | O(1) | LIFOåŸåˆ™ |
|  | é˜Ÿåˆ— | O(1) | O(1) | O(1) | FIFOåŸåˆ™ |

## ğŸ”§ åŠ¨æ€æ•°ç»„ (Dynamic Array)

### æ ¸å¿ƒæ¦‚å¿µä¸å®ç°

åŠ¨æ€æ•°ç»„æ˜¯æ•°ç»„çš„æ‰©å±•ï¼Œèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶è‡ªåŠ¨è°ƒæ•´å¤§å°ã€‚

```python
class DynamicArray:
    """
    åŠ¨æ€æ•°ç»„å®ç°
    æ—¶é—´å¤æ‚åº¦:
    - è®¿é—®: O(1)
    - æ’å…¥: å¹³å‡O(1)ï¼Œæœ€åO(n)
    - åˆ é™¤: O(n)
    ç©ºé—´å¤æ‚åº¦: O(n)
    """
    def __init__(self, capacity: int = 10):
        self.capacity = capacity          # åˆå§‹å®¹é‡
        self.size = 0                     # å½“å‰å…ƒç´ æ•°é‡
        self.array = [None] * capacity    # åº•å±‚æ•°ç»„

    def __len__(self) -> int:
        """è¿”å›æ•°ç»„å¤§å°"""
        return self.size

    def __getitem__(self, index: int):
        """æ”¯æŒç´¢å¼•è®¿é—®"""
        if index < 0 or index >= self.size:
            raise IndexError("Index out of range")
        return self.array[index]

    def __setitem__(self, index: int, value):
        """æ”¯æŒç´¢å¼•èµ‹å€¼"""
        if index < 0 or index >= self.size:
            raise IndexError("Index out of range")
        self.array[index] = value

    def append(self, value):
        """
        æ·»åŠ å…ƒç´ åˆ°æ•°ç»„æœ«å°¾
        æ—¶é—´å¤æ‚åº¦: å¹³å‡O(1)ï¼Œæœ€åO(n)ï¼ˆéœ€è¦æ‰©å®¹æ—¶ï¼‰
        """
        if self.size == self.capacity:
            self._resize(2 * self.capacity)  # åŒå€æ‰©å®¹ç­–ç•¥

        self.array[self.size] = value
        self.size += 1

    def _resize(self, new_capacity: int):
        """
        è°ƒæ•´æ•°ç»„å®¹é‡
        æ—¶é—´å¤æ‚åº¦: O(n)
        """
        new_array = [None] * new_capacity
        for i in range(self.size):
            new_array[i] = self.array[i]
        self.array = new_array
        self.capacity = new_capacity

    def pop(self):
        """
        åˆ é™¤æœ«å°¾å…ƒç´ 
        æ—¶é—´å¤æ‚åº¦: O(1)
        """
        if self.size == 0:
            raise IndexError("Pop from empty array")

        value = self.array[self.size - 1]
        self.size -= 1

        # ç¼©å®¹ç­–ç•¥ï¼šå½“åˆ©ç”¨ç‡ä½äº25%æ—¶ï¼Œå‡åŠå®¹é‡
        if self.size > 0 and self.size <= self.capacity // 4:
            self._resize(self.capacity // 2)

        return value

    def insert(self, index: int, value):
        """
        åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ 
        æ—¶é—´å¤æ‚åº¦: O(n)
        """
        if index < 0 or index > self.size:
            raise IndexError("Index out of range")

        if self.size == self.capacity:
            self._resize(2 * self.capacity)

        # å‘åç§»åŠ¨å…ƒç´ 
        for i in range(self.size, index, -1):
            self.array[i] = self.array[i - 1]

        self.array[index] = value
        self.size += 1

    def remove(self, value):
        """
        åˆ é™¤æŒ‡å®šå€¼çš„ç¬¬ä¸€ä¸ªå‡ºç°
        æ—¶é—´å¤æ‚åº¦: O(n)
        """
        for i in range(self.size):
            if self.array[i] == value:
                # å‘å‰ç§»åŠ¨å…ƒç´ 
                for j in range(i, self.size - 1):
                    self.array[j] = self.array[j + 1]
                self.size -= 1
                return True
        return False
```

### åŠ¨æ€æ•°ç»„çš„æ‰©å®¹ç­–ç•¥åˆ†æ

```python
def analyze_amortized_cost():
    """
    åˆ†æ‘Šæ—¶é—´å¤æ‚åº¦åˆ†æ
    åŠ¨æ€æ•°ç»„çš„appendæ“ä½œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(1)
    """
    import matplotlib.pyplot as plt
    import numpy as np

    operations = []
    total_cost = 0
    amortized_costs = []

    # æ¨¡æ‹Ÿä¸€ç³»åˆ—appendæ“ä½œ
    for i in range(1, 21):  # 20æ¬¡æ“ä½œ
        if len(operations) == 0 or len(operations) == 2 ** (len(operations).bit_length() - 1):
            # éœ€è¦æ‰©å®¹çš„æƒ…å†µ
            cost = len(operations) + 1  # å¤åˆ¶ç°æœ‰å…ƒç´  + æ’å…¥æ–°å…ƒç´ 
            operations.extend([None] * len(operations))  # åŒå€æ‰©å®¹
        else:
            cost = 1  # æ­£å¸¸æ’å…¥

        total_cost += cost
        amortized_cost = total_cost / i
        amortized_costs.append(amortized_cost)

    print(f"å¹³å‡åˆ†æ‘Šæˆæœ¬: {np.mean(amortized_costs):.2f}")

# åˆ†æ‘Šæˆæœ¬æ¼”ç¤º
amortized_data = [
    {"n": 1, "time": 1.0},
    {"n": 2, "time": 1.5},
    {"n": 4, "time": 2.0},
    {"n": 8, "time": 2.5},
    {"n": 16, "time": 3.0}
]
```

<ComplexityAnalyzer
  title="åŠ¨æ€æ•°ç»„åˆ†æ‘Šå¤æ‚åº¦åˆ†æ"
  algorithm="åŠ¨æ€æ•°ç»„Appendæ“ä½œ"
  theoreticalComplexity="O(1) åˆ†æ‘Š"
  data={amortized_data}
  color="rgb(99, 102, 241)"
/>

<ExerciseBlock
  title="åŠ¨æ€æ•°ç»„åˆ†æ"
  question="ä¸ºä»€ä¹ˆåŠ¨æ€æ•°ç»„çš„appendæ“ä½œåˆ†æ‘Šæ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Ÿ"
  type="multiple-choice"
  difficulty="medium"
  options={[
    {
      id: "a",
      text: "å› ä¸ºæ¯æ¬¡æ’å…¥éƒ½æ˜¯O(1)",
      correct: false,
      explanation: "æ‰©å®¹æ—¶éœ€è¦O(n)æ—¶é—´å¤åˆ¶å…ƒç´ "
    },
    {
      id: "b",
      text: "å› ä¸ºæ‰©å®¹æ“ä½œçš„é¢‘ç‡éšç€nå¢åŠ è€Œé™ä½",
      correct: true,
      explanation: "æ­£ç¡®ï¼è™½ç„¶å•æ¬¡æ‰©å®¹æ˜¯O(n)ï¼Œä½†æ‰©å®¹é¢‘ç‡ä¸ºO(1/n)ï¼Œæ‰€ä»¥åˆ†æ‘Šæˆæœ¬ä¸ºO(1)"
    },
    {
      id: "c",
      text: "å› ä¸ºä½¿ç”¨äº†ç‰¹æ®Šçš„æ•°æ®ç»“æ„",
      correct: false,
      explanation: "åŠ¨æ€æ•°ç»„ä»ç„¶æ˜¯åŸºäºæ™®é€šæ•°ç»„çš„"
    },
    {
      id: "d",
      text: "å› ä¸ºPythonçš„ä¼˜åŒ–",
      correct: false,
      explanation: "è¿™æ˜¯ç®—æ³•è®¾è®¡çš„ç‰¹æ€§ï¼Œä¸æ˜¯è¯­è¨€ç‰¹å®šçš„ä¼˜åŒ–"
    }
  ]}
  hint="è€ƒè™‘æ‰©å®¹æ“ä½œçš„å‘ç”Ÿé¢‘ç‡å’Œæˆæœ¬"
/>

## ğŸ”— é“¾è¡¨ (Linked List)

### å•é“¾è¡¨å®ç°

```python
class Node:
    """é“¾è¡¨èŠ‚ç‚¹"""
    def __init__(self, data):
        self.data = data
        self.next = None

class SinglyLinkedList:
    """
    å•é“¾è¡¨å®ç°
    æ—¶é—´å¤æ‚åº¦:
    - è®¿é—®: O(n)
    - æ’å…¥: O(1) (å·²çŸ¥ä½ç½®)
    - åˆ é™¤: O(1) (å·²çŸ¥ä½ç½®)
    ç©ºé—´å¤æ‚åº¦: O(n)
    """
    def __init__(self):
        self.head = None
        self.size = 0

    def __len__(self) -> int:
        return self.size

    def append(self, data):
        """
        åœ¨é“¾è¡¨æœ«å°¾æ·»åŠ èŠ‚ç‚¹
        æ—¶é—´å¤æ‚åº¦: O(n)
        """
        new_node = Node(data)

        if self.head is None:
            self.head = new_node
        else:
            current = self.head
            while current.next is not None:
                current = current.next
            current.next = new_node

        self.size += 1

    def prepend(self, data):
        """
        åœ¨é“¾è¡¨å¤´éƒ¨æ·»åŠ èŠ‚ç‚¹
        æ—¶é—´å¤æ‚åº¦: O(1)
        """
        new_node = Node(data)
        new_node.next = self.head
        self.head = new_node
        self.size += 1

    def insert_after(self, prev_node_data, data):
        """
        åœ¨æŒ‡å®šèŠ‚ç‚¹åæ’å…¥æ–°èŠ‚ç‚¹
        æ—¶é—´å¤æ‚åº¦: O(n)
        """
        current = self.head
        while current is not None:
            if current.data == prev_node_data:
                new_node = Node(data)
                new_node.next = current.next
                current.next = new_node
                self.size += 1
                return True
            current = current.next
        return False

    def delete(self, data):
        """
        åˆ é™¤æŒ‡å®šæ•°æ®çš„èŠ‚ç‚¹
        æ—¶é—´å¤æ‚åº¦: O(n)
        """
        if self.head is None:
            return False

        # åˆ é™¤å¤´èŠ‚ç‚¹
        if self.head.data == data:
            self.head = self.head.next
            self.size -= 1
            return True

        # åˆ é™¤å…¶ä»–èŠ‚ç‚¹
        current = self.head
        while current.next is not None:
            if current.next.data == data:
                current.next = current.next.next
                self.size -= 1
                return True
            current = current.next

        return False

    def find(self, data):
        """
        æŸ¥æ‰¾åŒ…å«æŒ‡å®šæ•°æ®çš„èŠ‚ç‚¹
        æ—¶é—´å¤æ‚åº¦: O(n)
        """
        current = self.head
        while current is not None:
            if current.data == data:
                return current
            current = current.next
        return None

    def reverse(self):
        """
        åè½¬é“¾è¡¨
        æ—¶é—´å¤æ‚åº¦: O(n)
        ç©ºé—´å¤æ‚åº¦: O(1)
        """
        prev = None
        current = self.head

        while current is not None:
            next_node = current.next
            current.next = prev
            prev = current
            current = next_node

        self.head = prev

    def __str__(self):
        """å­—ç¬¦ä¸²è¡¨ç¤º"""
        elements = []
        current = self.head
        while current is not None:
            elements.append(str(current.data))
            current = current.next
        return " -> ".join(elements) + " -> None"
```

### åŒé“¾è¡¨å®ç°

```python
class DoublyNode:
    """åŒé“¾è¡¨èŠ‚ç‚¹"""
    def __init__(self, data):
        self.data = data
        self.prev = None
        self.next = None

class DoublyLinkedList:
    """
    åŒé“¾è¡¨å®ç°
    ä¼˜åŠ¿ï¼šå¯ä»¥åŒå‘éå†ï¼Œåˆ é™¤æ“ä½œæ›´é«˜æ•ˆ
    """
    def __init__(self):
        self.head = None
        self.tail = None
        self.size = 0

    def append(self, data):
        """
        åœ¨æœ«å°¾æ·»åŠ èŠ‚ç‚¹
        æ—¶é—´å¤æ‚åº¦: O(1)
        """
        new_node = DoublyNode(data)

        if self.head is None:
            self.head = new_node
            self.tail = new_node
        else:
            new_node.prev = self.tail
            self.tail.next = new_node
            self.tail = new_node

        self.size += 1

    def prepend(self, data):
        """
        åœ¨å¤´éƒ¨æ·»åŠ èŠ‚ç‚¹
        æ—¶é—´å¤æ‚åº¦: O(1)
        """
        new_node = DoublyNode(data)

        if self.head is None:
            self.head = new_node
            self.tail = new_node
        else:
            new_node.next = self.head
            self.head.prev = new_node
            self.head = new_node

        self.size += 1

    def remove(self, node):
        """
        åˆ é™¤æŒ‡å®šèŠ‚ç‚¹
        æ—¶é—´å¤æ‚åº¦: O(1)
        """
        if node is None:
            return False

        if node.prev:
            node.prev.next = node.next
        else:
            self.head = node.next

        if node.next:
            node.next.prev = node.prev
        else:
            self.tail = node.prev

        self.size -= 1
        return True
```

### é“¾è¡¨å¯è§†åŒ–æ¼”ç¤º

<ArrayVisualizer
  array={[1, 2, 3, 4, 5]}
  title="é“¾è¡¨ç»“æ„ç¤ºæ„å›¾"
/>

## ğŸ“š æ ˆ (Stack)

### æ ˆçš„å®ç°

```python
class Stack:
    """
    æ ˆå®ç° - LIFO (Last In, First Out)
    ä½¿ç”¨åŠ¨æ€æ•°ç»„å®ç°
    """
    def __init__(self, capacity: int = 10):
        self.array = DynamicArray(capacity)

    def push(self, item):
        """å…¥æ ˆæ“ä½œ"""
        self.array.append(item)

    def pop(self):
        """å‡ºæ ˆæ“ä½œ"""
        return self.array.pop()

    def peek(self):
        """æŸ¥çœ‹æ ˆé¡¶å…ƒç´ """
        if self.is_empty():
            raise IndexError("Stack is empty")
        return self.array[-1]

    def is_empty(self) -> bool:
        """æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º"""
        return len(self.array) == 0

    def __len__(self) -> int:
        """è¿”å›æ ˆçš„å¤§å°"""
        return len(self.array)

    def __str__(self):
        """å­—ç¬¦ä¸²è¡¨ç¤º"""
        return "Stack: " + " <- ".join(str(self.array[i]) for i in range(len(self.array) - 1, -1, -1))

# ä½¿ç”¨é“¾è¡¨å®ç°çš„æ ˆ
class LinkedStack:
    """
    åŸºäºé“¾è¡¨çš„æ ˆå®ç°
    ä¼˜åŠ¿ï¼šæ²¡æœ‰å®¹é‡é™åˆ¶ï¼Œä¸ä¼šè§¦å‘æ‰©å®¹
    """
    def __init__(self):
        self.top = None
        self.size = 0

    def push(self, item):
        """å…¥æ ˆæ“ä½œ"""
        new_node = Node(item)
        new_node.next = self.top
        self.top = new_node
        self.size += 1

    def pop(self):
        """å‡ºæ ˆæ“ä½œ"""
        if self.is_empty():
            raise IndexError("Stack is empty")

        data = self.top.data
        self.top = self.top.next
        self.size -= 1
        return data

    def peek(self):
        """æŸ¥çœ‹æ ˆé¡¶å…ƒç´ """
        if self.is_empty():
            raise IndexError("Stack is empty")
        return self.top.data

    def is_empty(self) -> bool:
        return self.top is None

    def __len__(self) -> int:
        return self.size
```

### æ ˆçš„åº”ç”¨ç¤ºä¾‹

```python
def balanced_parentheses(expression: str) -> bool:
    """
    æ£€æŸ¥æ‹¬å·æ˜¯å¦å¹³è¡¡
    æ—¶é—´å¤æ‚åº¦: O(n)
    ç©ºé—´å¤æ‚åº¦: O(n)
    """
    stack = Stack()
    pairs = {')': '(', ']': '[', '}': '{'}

    for char in expression:
        if char in pairs.values():  # å¼€æ‹¬å·
            stack.push(char)
        elif char in pairs.keys():   # é—­æ‹¬å·
            if stack.is_empty() or stack.pop() != pairs[char]:
                return False

    return stack.is_empty()

def evaluate_postfix(expression: str) -> float:
    """
    è®¡ç®—åç¼€è¡¨è¾¾å¼
    æ—¶é—´å¤æ‚åº¦: O(n)
    ç©ºé—´å¤æ‚åº¦: O(n)
    """
    stack = Stack()

    for token in expression.split():
        if token.isdigit() or token.replace('.', '', 1).isdigit():
            stack.push(float(token))
        else:
            b = stack.pop()
            a = stack.pop()
            if token == '+':
                stack.push(a + b)
            elif token == '-':
                stack.push(a - b)
            elif token == '*':
                stack.push(a * b)
            elif token == '/':
                stack.push(a / b)

    return stack.pop()

# ç¤ºä¾‹ä½¿ç”¨
print(balanced_parentheses("{[()]}"))  # True
print(balanced_parentheses("{[(])}"))  # False
print(evaluate_postfix("3 4 + 2 *"))  # 14.0
```

<ExerciseBlock
  title="æ ˆçš„åº”ç”¨"
  question="ä½¿ç”¨æ ˆå®ç°ä¸€ä¸ªå‡½æ•°ï¼Œæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ã€‚"
  type="code"
  difficulty="medium"
  hint="å°†å­—ç¬¦ä¸²çš„ä¸€åŠå‹å…¥æ ˆï¼Œç„¶åä¸å¦ä¸€åŠæ¯”è¾ƒ"
  solution="```python\ndef is_palindrome(s: str) -> bool:\n    stack = Stack()\n    # å°†å‰åŠéƒ¨åˆ†å‹å…¥æ ˆ\n    for i in range(len(s) // 2):\n        stack.push(s[i])\n    \n    # æ¯”è¾ƒååŠéƒ¨åˆ†\n    start = len(s) // 2 if len(s) % 2 == 0 else len(s) // 2 + 1\n    for i in range(start, len(s)):\n        if stack.pop() != s[i]:\n            return False\n    return True\n```"
/>

## ğŸ“‹ é˜Ÿåˆ— (Queue)

### é˜Ÿåˆ—çš„å®ç°

```python
class Queue:
    """
    é˜Ÿåˆ—å®ç° - FIFO (First In, First Out)
    ä½¿ç”¨å¾ªç¯æ•°ç»„å®ç°
    """
    def __init__(self, capacity: int = 10):
        self.capacity = capacity
        self.array = [None] * capacity
        self.front = 0      # é˜Ÿå¤´æŒ‡é’ˆ
        self.rear = -1      # é˜Ÿå°¾æŒ‡é’ˆ
        self.size = 0

    def enqueue(self, item):
        """å…¥é˜Ÿæ“ä½œ"""
        if self.is_full():
            raise Exception("Queue is full")

        self.rear = (self.rear + 1) % self.capacity
        self.array[self.rear] = item
        self.size += 1

    def dequeue(self):
        """å‡ºé˜Ÿæ“ä½œ"""
        if self.is_empty():
            raise Exception("Queue is empty")

        item = self.array[self.front]
        self.front = (self.front + 1) % self.capacity
        self.size -= 1
        return item

    def peek(self):
        """æŸ¥çœ‹é˜Ÿå¤´å…ƒç´ """
        if self.is_empty():
            raise Exception("Queue is empty")
        return self.array[self.front]

    def is_empty(self) -> bool:
        return self.size == 0

    def is_full(self) -> bool:
        return self.size == self.capacity

    def __len__(self) -> int:
        return self.size

# ä½¿ç”¨é“¾è¡¨å®ç°çš„é˜Ÿåˆ—
class LinkedQueue:
    """
    åŸºäºé“¾è¡¨çš„é˜Ÿåˆ—å®ç°
    ä¼˜åŠ¿ï¼šåŠ¨æ€å¤§å°ï¼Œé«˜æ•ˆçš„å…¥é˜Ÿå‡ºé˜Ÿæ“ä½œ
    """
    def __init__(self):
        self.head = None
        self.tail = None
        self.size = 0

    def enqueue(self, item):
        """å…¥é˜Ÿæ“ä½œ - O(1)"""
        new_node = Node(item)

        if self.tail is None:
            self.head = new_node
            self.tail = new_node
        else:
            self.tail.next = new_node
            self.tail = new_node

        self.size += 1

    def dequeue(self):
        """å‡ºé˜Ÿæ“ä½œ - O(1)"""
        if self.is_empty():
            raise Exception("Queue is empty")

        data = self.head.data
        self.head = self.head.next

        if self.head is None:
            self.tail = None

        self.size -= 1
        return data

    def peek(self):
        """æŸ¥çœ‹é˜Ÿå¤´å…ƒç´ """
        if self.is_empty():
            raise Exception("Queue is empty")
        return self.head.data

    def is_empty(self) -> bool:
        return self.head is None

    def __len__(self) -> int:
        return self.size
```

### åŒç«¯é˜Ÿåˆ— (Deque)

```python
class Deque:
    """
    åŒç«¯é˜Ÿåˆ—å®ç° - å¯ä»¥ä»ä¸¤ç«¯æ’å…¥å’Œåˆ é™¤
    ä½¿ç”¨åŠ¨æ€æ•°ç»„å®ç°
    """
    def __init__(self, capacity: int = 10):
        self.capacity = capacity
        self.array = [None] * capacity
        self.front = 0
        self.rear = 0
        self.size = 0

    def add_front(self, item):
        """ä»å‰ç«¯æ·»åŠ """
        if self.is_full():
            self._resize(2 * self.capacity)

        self.front = (self.front - 1 + self.capacity) % self.capacity
        self.array[self.front] = item
        self.size += 1

    def add_rear(self, item):
        """ä»åç«¯æ·»åŠ """
        if self.is_full():
            self._resize(2 * self.capacity)

        self.array[self.rear] = item
        self.rear = (self.rear + 1) % self.capacity
        self.size += 1

    def remove_front(self):
        """ä»å‰ç«¯åˆ é™¤"""
        if self.is_empty():
            raise Exception("Deque is empty")

        item = self.array[self.front]
        self.front = (self.front + 1) % self.capacity
        self.size -= 1
        return item

    def remove_rear(self):
        """ä»åç«¯åˆ é™¤"""
        if self.is_empty():
            raise Exception("Deque is empty")

        self.rear = (self.rear - 1 + self.capacity) % self.capacity
        item = self.array[self.rear]
        self.size -= 1
        return item

    def _resize(self, new_capacity):
        """è°ƒæ•´å®¹é‡"""
        new_array = [None] * new_capacity
        for i in range(self.size):
            new_array[i] = self.array[(self.front + i) % self.capacity]
        self.array = new_array
        self.capacity = new_capacity
        self.front = 0
        self.rear = self.size
```

### é˜Ÿåˆ—çš„åº”ç”¨ç¤ºä¾‹

```python
from collections import deque
import threading
import time

class ThreadPool:
    """
    ç®€å•çš„çº¿ç¨‹æ± å®ç°
    ä½¿ç”¨é˜Ÿåˆ—ç®¡ç†ä»»åŠ¡
    """
    def __init__(self, num_workers: int = 4):
        self.task_queue = LinkedQueue()
        self.workers = []
        self.stop_event = threading.Event()

        # åˆ›å»ºå·¥ä½œçº¿ç¨‹
        for _ in range(num_workers):
            worker = threading.Thread(target=self._worker)
            worker.start()
            self.workers.append(worker)

    def submit_task(self, task):
        """æäº¤ä»»åŠ¡åˆ°é˜Ÿåˆ—"""
        self.task_queue.enqueue(task)

    def _worker(self):
        """å·¥ä½œçº¿ç¨‹å‡½æ•°"""
        while not self.stop_event.is_set():
            try:
                task = self.task_queue.dequeue()
                if task is not None:
                    task()
            except:
                time.sleep(0.1)

    def shutdown(self):
        """å…³é—­çº¿ç¨‹æ± """
        self.stop_event.set()
        for worker in self.workers:
            worker.join()

# BFSç®—æ³•ç¤ºä¾‹
from typing import List

def bfs_shortest_path(graph: List[List[int]], start: int, end: int) -> List[int]:
    """
    ä½¿ç”¨é˜Ÿåˆ—å®ç°BFSå¯»æ‰¾æœ€çŸ­è·¯å¾„
    æ—¶é—´å¤æ‚åº¦: O(V + E)
    """
    from collections import deque

    if start == end:
        return [start]

    queue = deque([(start, [start])])  # (å½“å‰èŠ‚ç‚¹, è·¯å¾„)
    visited = {start}

    while queue:
        current, path = queue.popleft()

        for neighbor in graph[current]:
            if neighbor == end:
                return path + [neighbor]

            if neighbor not in visited:
                visited.add(neighbor)
                queue.append((neighbor, path + [neighbor]))

    return []  # æ²¡æœ‰æ‰¾åˆ°è·¯å¾„

# ç¤ºä¾‹ä½¿ç”¨
graph = [
    [1, 2],      # èŠ‚ç‚¹0çš„é‚»å±…
    [0, 3],      # èŠ‚ç‚¹1çš„é‚»å±…
    [0, 3],      # èŠ‚ç‚¹2çš„é‚»å±…
    [1, 2, 4],   # èŠ‚ç‚¹3çš„é‚»å±…
    [3]          # èŠ‚ç‚¹4çš„é‚»å±…
]

print(bfs_shortest_path(graph, 0, 4))  # [0, 1, 3, 4] æˆ– [0, 2, 3, 4]
```

## ğŸ¯ æ€§èƒ½å¯¹æ¯”ä¸é€‰æ‹©

### ä¸åŒæ•°æ®ç»“æ„çš„æ€§èƒ½å¯¹æ¯”

| æ“ä½œ | åŠ¨æ€æ•°ç»„ | å•é“¾è¡¨ | åŒé“¾è¡¨ | æ ˆ | é˜Ÿåˆ— |
|------|----------|--------|--------|----|----|
| **è®¿é—®ç¬¬iä¸ªå…ƒç´ ** | O(1) | O(n) | O(n) | - | - |
| **å¤´éƒ¨æ’å…¥** | O(n) | O(1) | O(1) | O(1) | O(1) |
| **å°¾éƒ¨æ’å…¥** | O(1) | O(n) | O(1) | O(1) | O(1) |
| **ä¸­é—´æ’å…¥** | O(n) | O(n) | O(n) | - | - |
| **å¤´éƒ¨åˆ é™¤** | O(n) | O(1) | O(1) | O(1) | O(1) |
| **å°¾éƒ¨åˆ é™¤** | O(1) | O(n) | O(1) | O(1) | O(1) |
| **ä¸­é—´åˆ é™¤** | O(n) | O(n) | O(n) | - | - |
| **ç©ºé—´æ•ˆç‡** | é«˜ | ä¸­ | ä½ | é«˜ | é«˜ |
| **ç¼“å­˜å‹å¥½æ€§** | é«˜ | ä½ | ä½ | é«˜ | ä¸­ |

### é€‰æ‹©æŒ‡å—

```python
def choose_data_structure(operation_pattern: str, data_size: int, access_pattern: str) -> str:
    """
    æ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©æ•°æ®ç»“æ„
    """
    if access_pattern == "random":
        return "åŠ¨æ€æ•°ç»„"
    elif operation_pattern == "insert_delete_both_ends":
        return "åŒé“¾è¡¨"
    elif operation_pattern == "lifo":
        return "æ ˆ"
    elif operation_pattern == "fifo":
        return "é˜Ÿåˆ—"
    elif data_size < 1000:
        return "åŠ¨æ€æ•°ç»„"
    else:
        return "é“¾è¡¨"
```

<ExerciseBlock
  title="æ•°æ®ç»“æ„é€‰æ‹©"
  question="éœ€è¦é¢‘ç¹åœ¨åºåˆ—ä¸­é—´æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Œä¸”ä¸»è¦æŒ‰é¡ºåºè®¿é—®ï¼Œåº”è¯¥é€‰æ‹©å“ªç§æ•°æ®ç»“æ„ï¼Ÿ"
  type="multiple-choice"
  difficulty="easy"
  options={[
    {
      id: "a",
      text: "åŠ¨æ€æ•°ç»„",
      correct: false,
      explanation: "ä¸­é—´æ’å…¥åˆ é™¤æ˜¯O(n)ï¼Œæ•ˆç‡è¾ƒä½"
    },
    {
      id: "b",
      text: "é“¾è¡¨",
      correct: true,
      explanation: "æ­£ç¡®ï¼é“¾è¡¨çš„ä¸­é—´æ’å…¥åˆ é™¤æ•ˆç‡é«˜ï¼Œé€‚åˆé¢‘ç¹ä¿®æ”¹"
    },
    {
      id: "c",
      text: "æ ˆ",
      correct: false,
      explanation: "æ ˆåªèƒ½åœ¨ä¸¤ç«¯æ“ä½œ"
    },
    {
      id: "d",
      text: "é˜Ÿåˆ—",
      correct: false,
      explanation: "é˜Ÿåˆ—ä¸»è¦ç”¨äºFIFOåœºæ™¯"
    }
  ]}
  hint="è€ƒè™‘æ’å…¥åˆ é™¤æ“ä½œçš„æ•ˆç‡"
/>

## ğŸ¯ é«˜çº§ä¸»é¢˜

### å†…å­˜æ± ä¼˜åŒ–

```python
class MemoryPool:
    """
    å†…å­˜æ± ç®¡ç†å™¨
    å‡å°‘é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾
    """
    def __init__(self, block_size: int, initial_blocks: int = 100):
        self.block_size = block_size
        self.free_blocks = []
        self.allocated_blocks = set()

        # é¢„åˆ†é…å†…å­˜å—
        for _ in range(initial_blocks):
            self.free_blocks.append(bytearray(block_size))

    def allocate(self) -> bytearray:
        """åˆ†é…å†…å­˜å—"""
        if self.free_blocks:
            block = self.free_blocks.pop()
            self.allocated_blocks.add(id(block))
            return block
        else:
            # åŠ¨æ€åˆ†é…æ–°çš„å—
            new_block = bytearray(self.block_size)
            self.allocated_blocks.add(id(new_block))
            return new_block

    def deallocate(self, block: bytearray):
        """é‡Šæ”¾å†…å­˜å—"""
        block_id = id(block)
        if block_id in self.allocated_blocks:
            self.allocated_blocks.remove(block_id)
            # æ¸…ç©ºå—å†…å®¹
            block[:] = b'\x00' * self.block_size
            self.free_blocks.append(block)

# ä½¿ç”¨å†…å­˜æ± ä¼˜åŒ–çš„é“¾è¡¨
class PooledLinkedList:
    def __init__(self):
        self.pool = MemoryPool(32)  # è¶³å¤Ÿå­˜å‚¨ä¸€ä¸ªèŠ‚ç‚¹
        self.head = None
        self.size = 0

    def append(self, data):
        # ä»å†…å­˜æ± åˆ†é…èŠ‚ç‚¹å†…å­˜
        # å®ç°ç»†èŠ‚...
        pass
```

### ç¼“å­˜å‹å¥½çš„æ•°æ®ç»“æ„

```python
class CacheFriendlyArray:
    """
    ç¼“å­˜å‹å¥½çš„æ•°ç»„å®ç°
    è€ƒè™‘CPUç¼“å­˜è¡Œå¤§å°ï¼ˆé€šå¸¸64å­—èŠ‚ï¼‰
    """
    def __init__(self):
        self.data = []
        self.cache_line_size = 64  # å…¸å‹çš„ç¼“å­˜è¡Œå¤§å°

    def prefetch_optimized_access(self, indices):
        """
        é¢„å–ä¼˜åŒ–çš„è®¿é—®æ¨¡å¼
        å‡å°‘ç¼“å­˜æœªå‘½ä¸­
        """
        # é¢„å–ä¸‹ä¸€ä¸ªç¼“å­˜è¡Œçš„æ•°æ®
        for i in range(0, len(indices), self.cache_line_size // 8):
            # é¢„å–æŒ‡ä»¤ï¼ˆç¤ºä¾‹ï¼‰
            # å®é™…å®ç°éœ€è¦å¹³å°ç‰¹å®šçš„é¢„å–æŒ‡ä»¤
            batch = indices[i:i + self.cache_line_size // 8]
            for idx in batch:
                if idx < len(self.data):
                    # è®¿é—®æ•°æ®
                    yield self.data[idx]
```

<ExerciseBlock
  title="ç»¼åˆåº”ç”¨"
  question="è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„æ¥æ”¯æŒä»¥ä¸‹æ“ä½œï¼šadd(element), remove(element), get_random_element()ï¼Œæ‰€æœ‰æ“ä½œè¦æ±‚O(1)æ—¶é—´å¤æ‚åº¦ã€‚"
  type="code"
  difficulty="hard"
  hint="ç»“åˆæ•°ç»„å’Œå“ˆå¸Œè¡¨çš„ä¼˜ç‚¹"
  solution="```python\nimport random\n\nclass RandomizedSet:\n    def __init__(self):\n        self.array = []  # å­˜å‚¨å…ƒç´ \n        self.dict = {}   # å…ƒç´ åˆ°ç´¢å¼•çš„æ˜ å°„\n\n    def add(self, element):\n        if element in self.dict:\n            return False\n        self.array.append(element)\n        self.dict[element] = len(self.array) - 1\n        return True\n\n    def remove(self, element):\n        if element not in self.dict:\n            return False\n        \n        # å°†è¦åˆ é™¤çš„å…ƒç´ ä¸æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢\n        last_element = self.array[-1]\n        idx_to_remove = self.dict[element]\n        \n        self.array[idx_to_remove] = last_element\n        self.dict[last_element] = idx_to_remove\n        \n        # åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ \n        self.array.pop()\n        del self.dict[element]\n        return True\n\n    def get_random(self):\n        return random.choice(self.array)\n```"
/>

## ğŸ“ æ€»ç»“ä¸æœ€ä½³å®è·µ

### å…³é”®è¦ç‚¹

1. **æ•°æ®ç»“æ„é€‰æ‹©åŸåˆ™**ï¼š
   - æ ¹æ®è®¿é—®æ¨¡å¼é€‰æ‹©ï¼ˆéšæœºè®¿é—®vsé¡ºåºè®¿é—®ï¼‰
   - è€ƒè™‘æ’å…¥åˆ é™¤çš„é¢‘ç‡å’Œä½ç½®
   - è¯„ä¼°å†…å­˜ä½¿ç”¨å’Œç¼“å­˜æ•ˆç‡

2. **æ€§èƒ½ä¼˜åŒ–æŠ€å·§**ï¼š
   - ä½¿ç”¨å†…å­˜æ± å‡å°‘åˆ†é…å¼€é”€
   - è€ƒè™‘ç¼“å­˜è¡Œå¤§å°ä¼˜åŒ–æ•°æ®å¸ƒå±€
   - é€‰æ‹©åˆé€‚çš„åˆå§‹å®¹é‡å’Œæ‰©å®¹ç­–ç•¥

3. **å·¥ç¨‹å®è·µ**ï¼š
   - ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“å®ç°
   - åœ¨æ€§èƒ½å…³é”®åœºæ™¯æ‰è€ƒè™‘è‡ªå®šä¹‰å®ç°
   - å……åˆ†æµ‹è¯•è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µ

### å®é™…åº”ç”¨å»ºè®®

```python
def data_structure_recommendation(use_case: str) -> str:
    """
    æ ¹æ®ä½¿ç”¨åœºæ™¯æ¨èæ•°æ®ç»“æ„
    """
    recommendations = {
        "web_session_storage": "å“ˆå¸Œè¡¨ + é“¾è¡¨ (LRUç¼“å­˜)",
        "task_scheduler": "ä¼˜å…ˆé˜Ÿåˆ— (å †)",
        "text_editor": "åŒé“¾è¡¨ + å“ˆå¸Œè¡¨",
        "file_system": "Bæ ‘",
        "network_routing": "å›¾ + ä¼˜å…ˆé˜Ÿåˆ—",
        "real_time_data": "ç¯å½¢ç¼“å†²åŒº"
    }

    return recommendations.get(use_case, "æ ¹æ®å…·ä½“éœ€æ±‚åˆ†æ")
```

<ExerciseBlock
  title="ç« èŠ‚æµ‹éªŒ"
  question:"åœ¨ä»€ä¹ˆæƒ…å†µä¸‹é“¾è¡¨æ¯”æ•°ç»„æ›´åˆé€‚ï¼Ÿ"
  type="multiple-choice"
  difficulty="medium"
  options={[
    {
      id: "a",
      text: "éœ€è¦é¢‘ç¹éšæœºè®¿é—®å…ƒç´ ",
      correct: false,
      explanation: "æ•°ç»„çš„éšæœºè®¿é—®æ˜¯O(1)ï¼Œé“¾è¡¨æ˜¯O(n)"
    },
    {
      id: "b",
      text: "éœ€è¦é¢‘ç¹åœ¨åºåˆ—ä¸­é—´æ’å…¥åˆ é™¤å…ƒç´ ",
      correct: true,
      explanation: "æ­£ç¡®ï¼é“¾è¡¨çš„ä¸­é—´æ’å…¥åˆ é™¤æ˜¯O(1)ï¼Œè€Œæ•°ç»„æ˜¯O(n)"
    },
    {
      id: "c",
      text: "éœ€è¦èŠ‚çœå†…å­˜ç©ºé—´",
      correct: false,
      explanation: "é“¾è¡¨éœ€è¦é¢å¤–çš„æŒ‡é’ˆç©ºé—´ï¼Œå†…å­˜å¼€é”€æ›´å¤§"
    },
    {
      id: "d",
      text: "éœ€è¦æ›´å¥½çš„ç¼“å­˜æ€§èƒ½",
      correct: false,
      explanation: "æ•°ç»„å…·æœ‰æ›´å¥½çš„ç©ºé—´å±€éƒ¨æ€§ï¼Œç¼“å­˜æ€§èƒ½æ›´å¥½"
    }
  ]}
  hint="è€ƒè™‘ä¸åŒæ“ä½œçš„æ—¶é—´å¤æ‚åº¦"
/>

---

## ğŸš€ è¯¾åç»ƒä¹ 

1. **åŸºç¡€ç»ƒä¹ **ï¼šå®ç°æ‰€æœ‰åŸºç¡€æ•°æ®ç»“æ„å¹¶æµ‹è¯•æ€§èƒ½
2. **è¿›é˜¶ç»ƒä¹ **ï¼šä¸ºç‰¹å®šåº”ç”¨åœºæ™¯ä¼˜åŒ–æ•°æ®ç»“æ„
3. **å®æˆ˜ç»ƒä¹ **ï¼šå®ç°å†…å­˜æ± å’Œç¼“å­˜ä¼˜åŒ–
4. **é¡¹ç›®ç»ƒä¹ **ï¼šè®¾è®¡ä¸€ä¸ªå¤åˆæ•°æ®ç»“æ„è§£å†³å®é™…é—®é¢˜

**è®°ä½**ï¼šé€‰æ‹©æ­£ç¡®çš„æ•°æ®ç»“æ„æ˜¯ç®—æ³•è®¾è®¡çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼ğŸ¯